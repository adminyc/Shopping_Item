<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>网易注册</title>
        <link rel="shortcut icon" href="img/eb51812a-63f4-42d4-ba23-5e7406f859be_16_16.ico">
        <link rel="stylesheet" href="layui/css/layui.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/index-0c6ea8db81.css">
    </head>
    <body>
        <header id="docHead" class="j-indexTopFixed">
            <div id="docHeadWrap">
                <a href="" class="logokaola " title="网易考拉" data-param="zn=top"></a>
                <div class="logo f-dn"><a class="logokaolalt " href="" data-param="zn=top"></a></div>    <!-- 登陆页面，顶部为一张固定的图片 -->
                <div id="topimg"></div>
            </div>
        </header>

        <div class="login-main">
            <header class="layui-elip" style="width: 82%">网易账号注册</header>

            <!-- 表单选项 -->
            <form class="layui-form">
                <div class="layui-input-inline">
                    <!-- 登录用户名 -->
                    <div class="layui-inline" style="width: 85%">
                        <input type="text" id="user" name="username" required  lay-verify="required" placeholder="请输入用户名" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="ri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="wr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>
                <!-- 真名 -->
                <div class="layui-input-inline">
                    <div class="layui-inline" style="width: 85%">
                        <input type="text" maxlength="6" id="name" name="uname" required  lay-verify="required" placeholder="请输入真实姓名" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="uri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="uwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>
                <!-- 性别 -->
                <div class="layui-input-inline">
                    <label class="layui-form-label" style="margin-left: -30px;color: #CBCCCD;font-size: 14px">
                        您的性别</label>
                    <div class="layui-input-block">
                        <input type="radio" name="gender" value="男" title="男" checked="">
                        <input type="radio" name="gender" value="女" title="女">
                    </div>
                </div>
                <!-- 身份证号码 -->
                <div class="layui-input-inline">
                    <div class="layui-inline" style="width: 85%">
                        <input type="text" maxlength="18" id="idcard" name="idnumber" required  lay-verify="required" placeholder="请输入身份证号码" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="iri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="iwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>
                <!-- 手机号 -->
                <div class="layui-input-inline">
                    <div class="layui-inline" style="width: 85%">
                        <input maxlength="11" type="text" id="phone" name="mobilephoneno" required  lay-verify="required" placeholder="请输入手机号码" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="hri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="hwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>
                <!-- 出生日期 -->
                <div class="layui-input-inline">
                    <div class="layui-inline" style="width: 85%">
                        <input type="text" name="birthday" id="borndate" required  lay-verify="required" placeholder="出生日期:yyyy-MM-dd" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="dri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="dwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>
                <!-- 密码 -->
                <div class="layui-input-inline">
                    <div class="layui-inline" style="width: 85%">
                        <input type="password" id="pwd" name="password" required  lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="pri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="pwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>
                <!-- 确认密码 -->
                <div class="layui-input-inline">
                    <div class="layui-inline" style="width: 85%">
                        <input type="password" id="rpwd" name="repassword" required  lay-verify="required" placeholder="请确认密码" autocomplete="off" class="layui-input">
                    </div>
                    <!-- 对号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="rpri" style="color: green;font-weight: bolder;" hidden></i>
                    </div>
                    <!-- 错号 -->
                    <div class="layui-inline">
                        <i class="layui-icon" id="rpwr" style="color: red; font-weight: bolder;" hidden>ဆ</i>
                    </div>
                </div>


                <div class="layui-input-inline login-btn" style="width: 85%">
                    <button type="submit" lay-submit lay-filter="sub" class="layui-btn layui-btn-danger">注册</button>
                </div>
                <hr style="width: 85%" />
                <p style="width: 85%">
                    <a href="wykllogin.html" class="fl">已有账号？立即登录</a>
            </form>
        </div>

        <style type="text/css">
            .layui-input-block input{background-color:red}
        </style>
        <script src="layui/layui.all.js"></script>
        <script type="text/javascript">
            /* 日期控件 */
            layui.use('laydate', function(){
                var laydate = layui.laydate;
                //执行一个laydate实例
                laydate.render({
                    elem: '#borndate' //指定元素
                });
            });
            layui.use(['form','jquery','layer'], function () {
                var form   = layui.form;
                var $      = layui.jquery;
                var layer  = layui.layer;
                //添加表单失焦事件
                //验证表单
                $('#user').blur(function() {
                    var user = $(this).val();
                    if(user!=null && user!=''){
                        $.ajax({
                            url:'verifyusername',
                            type:'post',
                            dataType:'text',
                            data:{user:user},
                            //验证用户名是否可用
                            success:function(data){
                                if (data==1) {
                                    $('#ri').removeAttr('hidden');
                                    $('#wr').attr('hidden','hidden');
                                } else {
                                    $('#wr').removeAttr('hidden');
                                    $('#ri').attr('hidden','hidden');
                                    layer.msg('当前用户名已被占用! ');
                                }
                            }
                        })
                    }else{
                        $('#wr').removeAttr('hidden');
                        $('#ri').attr('hidden','hidden');
                        layer.msg('用户名必须输入! ');
                    }
                });
                $('#name').blur(function() {
                    var borndate = $(this).val();
                    //验证身份证号码18位正则
                    var pattern = /^[\u4E00-\u9FA5A-Za-z]+$/;
                    if(!pattern.test(borndate)){
                        $('#uwr').removeAttr('hidden');
                        $('#uri').attr('hidden','hidden');
                        layer.msg('请输入合法的姓名');
                    }else{
                        $('#uri').removeAttr('hidden');
                        $('#uwr').attr('hidden','hidden');
                    }
                });
                $('#idcard').blur(function() {
                    var borndate = $(this).val();
                    //验证身份证号码18位正则
                    var pattern = /^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;
                    if(!pattern.test(borndate)){
                        $('#iwr').removeAttr('hidden');
                        $('#iri').attr('hidden','hidden');
                        layer.msg('请输入合法的身份证号码');
                    }else{
                        $('#iri').removeAttr('hidden');
                        $('#iwr').attr('hidden','hidden');
                    }
                });
                $('#borndate').blur(function() {
                    var borndate = $(this).val();
                    var pattern = /((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/;//验证手机号正则表达式
                    if(!pattern.test(borndate)){
                        $('#dwr').removeAttr('hidden');
                        $('#dri').attr('hidden','hidden');
                        layer.msg('请选择输入合法出生日期');
                    }else{
                        $('#dri').removeAttr('hidden');
                        $('#dwr').attr('hidden','hidden');
                    }
                });
                $('#phone').blur(function() {
                    var phone = $(this).val();
                    var pattern = /^1[34578]\d{9}$/; //验证手机号正则表达式
                    if(!pattern.test(phone)){
                        $('#hwr').removeAttr('hidden');
                        $('#hri').attr('hidden','hidden');
                        layer.msg('请输入合法手机号');
                    }else{
                        $('#hri').removeAttr('hidden');
                        $('#hwr').attr('hidden','hidden');
                    }
                });
                // you code ...
                // 为密码添加正则验证
                $('#pwd').blur(function() {
                    var reg = /^[\w]{6,12}$/;
                    if(!($('#pwd').val().match(reg))){
                        //layer.msg('请输入合法密码');
                        $('#pwr').removeAttr('hidden');
                        $('#pri').attr('hidden','hidden');
                        layer.msg('请输入合法密码');
                    }else {
                        $('#pri').removeAttr('hidden');
                        $('#pwr').attr('hidden','hidden');
                    }
                });

                //验证两次密码是否一致
                $('#rpwd').blur(function() {
                    if($('#pwd').val() != $('#rpwd').val()){
                        $('#rpwr').removeAttr('hidden');
                        $('#rpri').attr('hidden','hidden');
                        layer.msg('两次输入密码不一致!');
                    }else {
                        $('#rpri').removeAttr('hidden');
                        $('#rpwr').attr('hidden','hidden');
                    };
                });
                //添加表单监听事件,提交注册信息
                form.on('submit(sub)', function() {
                    $.ajax({
                        url:'registeruser',
                        type:'post',
                        dataType:'text',
                        data:{
                            username:$('#user').val(),
                            uname:$('#name').val(),
                            gender:$('input:radio[name="gender"]:checked').val(),
                            idnumber:$("#idcard").val(),
                            mobilephoneno:$('#phone').val(),
                            birthday:$('#borndate').val(),
                            password:$('#pwd').val(),
                        },success:function(data){
                            if (data == 1) {
                                layer.msg('注册成功');
                                location.href = "login-wykl";
                            }else {
                                layer.msg('注册失败');
                            }
                        }
                    })
                    //防止页面跳转
                    return false;
                });

            });
        </script>
        <!-- 底部 -->
        <footer data-v-2163ec11="" class="common-footer" style="margin-top: 713px"><!--  style="position:fixed;bottom:0" -->
            <div data-v-2163ec11="" id="aboutNEST">
                <a data-v-2163ec11="" href="http://ir.netease.com/phoenix.zhtml?c=122303&amp;p=irol-IRHome&amp;no_protofix" rel="nofollow" target="_blank" title="About NetEase">
                    About NetEase</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="http://gb.corp.163.com/gb/about/overview.html?no_protofix" rel="nofollow" target="_blank" title="公司简介">公司简介</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="http://gb.corp.163.com/gb/contactus.html?no_protofix" rel="nofollow" target="_blank" title="联系方法">联系方法</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="https://www.kaola.com/footer/friendlylink.shtml" target="_blank" title="友情链接" data-param="zn=footer">友情链接</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="http://hr.163.com/?no_protofix" rel="nofollow" target="_blank" title="招聘信息">招聘信息</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="http://help.163.com/?no_protofix" rel="nofollow" target="_blank" title="客户服务">客户服务</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="http://gb.corp.163.com/gb/legal.html?no_protofix" rel="nofollow" target="_blank" title="隐私政策">隐私政策</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="http://emarketing.163.com/?no_protofix" rel="nofollow" target="_blank" title="网络营销">网络营销</a>
                <span data-v-2163ec11="" class="sep">|</span>
                <a data-v-2163ec11="" href="https://www.kaola.com/" target="_blank" title="网易考拉" data-param="zn=footer">网易考拉</a>
                <br data-v-2163ec11="">
                <span data-v-2163ec11="" class="m-license">网络文化经营许可证：浙网文[2016]0155-055号</span>
                <span data-v-2163ec11="" class="m-license">增值电信业务经营许可证：浙B2-20160288</span>
                <span data-v-2163ec11="" class="m-license">
                    <a data-v-2163ec11="" href="//pages.kaola.com/pages/activity/Businessentity.shtml" rel="nofollow" target="_blank" title="自营经营者信息">
                        自营经营者信息</a>
                </span>
                <span data-v-2163ec11="" class="m-license">（浙）网械平台备字[2018]第00007号</span>
                <br data-v-2163ec11="">
                <a data-v-2163ec11="" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802002216&amp;no_protofix">
                    <img data-v-2163ec11="" src="img/f28aa8ee818a42bf832341f605eccefb.png"></a>
                <a data-v-2163ec11="" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802002216&amp;no_protofix">
                    <span data-v-2163ec11="" style="margin: 0px 0px 0px 5px;">浙公网安备 33010802002216号</span>
                </a>
                <span data-v-2163ec11="" class="m-license">网易公司版权所有©1997-2019</span>
                <a data-v-2163ec11="" target="_blank" href="//haitao.nos.netease.com/d37ac4eb-016f-485b-9577-04ae7e0f4bbd.jpg">
                    <span data-v-2163ec11="" style="margin: 0px 0px 0px 20px;">互联网药品信息服务资格证书编号（浙）-2017-0027</span>
                </a>
                <span data-v-2163ec11="" class="m-license">浙ICP备16011229号-6</span>
                <div data-v-2163ec11="" class="f-tac"><span data-v-2163ec11="" id="KXYZ">
                    <a data-v-2163ec11="" href="https://ss.knet.cn/verifyseal.dll?sn=e15040881010058239iy2f000000&amp;ct=df&amp;a=1&amp;pa=20160215" id="kx_verify" tabindex="-1" target="_blank" kx_type="图标式" style="display: inline-block;">
                        <img data-v-2163ec11="" src="img/d720d83b55a04b6f932ea845c673c5bf.png" alt="可信网站"></a>
                </span>
                    <a data-v-2163ec11="" href="http://idinfo.zjaic.gov.cn/bscx.do?method=lzxx&amp;id=3301083301980000040550&amp;no_protofix" target="_blank" class="u-shield">
                        <img data-v-2163ec11="" src="img/d071c0de-5360-4dcb-915a-f9f9bb62a9d5.gif"
                             alt="工商营业执照网上标识"></a>
                </div>
            </div>
        </footer>
    </body>
</html>